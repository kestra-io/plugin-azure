id: synapse-spark-batch
namespace: io.kestra.tests

tasks:
  - id: submit_spark_job
    type: io.kestra.plugin.azure.synapse.SparkBatchJobCreate
    endpoint: "{{ globals.azure.synapse.endpoint }}"
    sparkPoolName: "{{ globals.azure.synapse.sparkPoolName }}"
    tenantId: "{{ globals.azure.synapse.tenantId }}"
    clientId: "{{ globals.azure.synapse.clientId }}"
    clientSecret: "{{ globals.azure.synapse.clientSecret }}"
    name: "TestSparkJob"
    file: "{{ globals.azure.synapse.testFile }}"
    className: "org.apache.spark.examples.SparkPi"
    arguments:
      - "100"
    driverMemory: "4g"
    driverCores: 2
    executorMemory: "4g"
    executorCores: 2
    executorCount: 2
